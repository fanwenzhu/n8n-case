{
  "name": "å¾®ä¿¡ç¾¤èŠå­å·¥ä½œæµï¼ˆtigerAIï¼‰",
  "nodes": [
    {
      "parameters": {
        "inputSource": "passthrough"
      },
      "id": "61b6790e-2cbb-40ea-ba28-4b13ad18d5f9",
      "name": "Execute Workflow Trigger",
      "type": "n8n-nodes-base.executeWorkflowTrigger",
      "position": [
        736,
        384
      ],
      "typeVersion": 1.1
    },
    {
      "parameters": {
        "assignments": {
          "assignments": [
            {
              "id": "validate-input",
              "name": "group_name",
              "value": "={{ $json.group_name || 'æœªçŸ¥ç¾¤ç»„' }}",
              "type": "string"
            },
            {
              "id": "validate-date",
              "name": "date",
              "value": "={{ $json.date || $now.minus({days: 1}).format('yyyy-MM-dd') }}",
              "type": "string"
            },
            {
              "id": "validate-style",
              "name": "web_style",
              "value": "={{ $json.web_style || 'minimalist' }}",
              "type": "string"
            },
            {
              "id": "batch-info",
              "name": "batch_id",
              "value": "={{ $json.batch_id }}",
              "type": "string"
            },
            {
              "id": "timestamp",
              "name": "process_start_time",
              "value": "={{ $now.toISO() }}",
              "type": "string"
            },
            {
              "id": "450a5c15-3481-4fe6-b789-ba25fd411993",
              "name": "description",
              "value": "={{ $json.description || 'æœªçŸ¥ç¾¤ç»„' }}",
              "type": "string"
            }
          ]
        },
        "options": {}
      },
      "type": "n8n-nodes-base.set",
      "typeVersion": 3.4,
      "position": [
        960,
        384
      ],
      "id": "05dc2da1-b691-4fc2-8089-65426f4a345c",
      "name": "éªŒè¯è¾“å…¥å‚æ•°"
    },
    {
      "parameters": {
        "content": "## Chatlog MCP",
        "width": 300,
        "color": 5
      },
      "type": "n8n-nodes-base.stickyNote",
      "typeVersion": 1,
      "position": [
        1344,
        592
      ],
      "id": "9ababea3-6432-46c5-a5f9-3a6bac56c448",
      "name": "Sticky Note4"
    },
    {
      "parameters": {
        "jsCode": "// è·å–AI Agentçš„è¾“å‡º\nlet aiOutput;\ntry {\n  // é¦–å…ˆæ£€æŸ¥è¾“å…¥æ•°æ®ç»“æ„\n  const inputData = $input.first().json;\n  console.log('Input data structure:', JSON.stringify(inputData, null, 2));\n  \n  // å°è¯•ä¸åŒçš„æ•°æ®ç»“æ„è·¯å¾„\n  if (inputData.choices && inputData.choices[0] && inputData.choices[0].message) {\n    // OpenAI API æ ‡å‡†æ ¼å¼\n    aiOutput = inputData.choices[0].message.content;\n  } else if (inputData.message && inputData.message.content) {\n    // ç®€åŒ–çš„æ¶ˆæ¯æ ¼å¼\n    aiOutput = inputData.message.content;\n  } else if (inputData.content) {\n    // ç›´æ¥å†…å®¹æ ¼å¼\n    aiOutput = inputData.content;\n  } else if (inputData.output) {\n    // è¾“å‡ºå­—æ®µæ ¼å¼\n    aiOutput = inputData.output;\n  } else if (typeof inputData === 'string') {\n    // çº¯å­—ç¬¦ä¸²æ ¼å¼\n    aiOutput = inputData;\n  } else {\n    // å¦‚æœéƒ½æ‰¾ä¸åˆ°ï¼Œå°è¯•æ‰¾åˆ°ç¬¬ä¸€ä¸ªå­—ç¬¦ä¸²å€¼\n    const findStringValue = (obj) => {\n      if (typeof obj === 'string') return obj;\n      if (Array.isArray(obj)) {\n        for (const item of obj) {\n          const result = findStringValue(item);\n          if (result) return result;\n        }\n      } else if (typeof obj === 'object' && obj !== null) {\n        for (const key in obj) {\n          const result = findStringValue(obj[key]);\n          if (result) return result;\n        }\n      }\n      return null;\n    };\n    \n    aiOutput = findStringValue(inputData);\n    \n    if (!aiOutput) {\n      throw new Error('æ— æ³•åœ¨è¾“å…¥æ•°æ®ä¸­æ‰¾åˆ°AIè¾“å‡ºå†…å®¹');\n    }\n  }\n  \n  console.log('Found AI output:', aiOutput.substring(0, 200) + '...');\n  \n} catch (error) {\n  console.error('è·å–AIè¾“å‡ºæ—¶å‡ºé”™:', error);\n  return [{\n    json: {\n      error: 'æ— æ³•è·å–AIè¾“å‡º: ' + error.message,\n      inputData: $input.first().json,\n      status: 'error'\n    }\n  }];\n}\n\n// æ¸…ç†å¯èƒ½çš„markdownæ ‡è®°\nlet htmlContent = aiOutput;\nif (htmlContent.includes('```html')) {\n  htmlContent = htmlContent.replace(/```html\\n?/g, '').replace(/\\n?```/g, '');\n}\nif (htmlContent.includes('```')) {\n  htmlContent = htmlContent.replace(/```\\n?/g, '').replace(/\\n?```/g, '');\n}\n\n// è·å–ç¾¤èŠåç§°å’Œæ—¥æœŸï¼ˆä»å·¥ä½œæµè¾“å…¥æˆ–è®¾ç½®é»˜è®¤å€¼ï¼‰\nconst groupName = $('éªŒè¯è¾“å…¥å‚æ•°')?.item?.json?.group_name || 'unknown';\nconst batchId = $('éªŒè¯è¾“å…¥å‚æ•°').item.json.batch_id;\nconst date = $('éªŒè¯è¾“å…¥å‚æ•°')?.item?.json?.date || new Date().toISOString().split('T')[0];\n\nconsole.log('ç¾¤èŠä¿¡æ¯:', { groupName, date });\n\n// ğŸ”¥ æ”¹è¿›ï¼šæ™ºèƒ½HTMLå†…å®¹æ¸…ç† - ä¿æŠ¤å›¾è¡¨å’Œè„šæœ¬å†…å®¹\nconsole.log('å¼€å§‹HTMLæ¸…ç†ï¼ŒåŸå§‹é•¿åº¦:', htmlContent.length);\n\n// æ™ºèƒ½æ¸…ç†HTMLå†…å®¹ï¼Œä¿æŠ¤é‡è¦çš„ä»£ç åŒºåŸŸ\nconst smartCleanHtmlForMCP = (html) => {\n  // 1. é¦–å…ˆä¿æŠ¤é‡è¦çš„ä»£ç åŒºåŸŸ\n  const protectedSections = [];\n  let cleanedHtml = html;\n  \n  // ä¿æŠ¤ script æ ‡ç­¾å†…å®¹ï¼ˆåŒ…æ‹¬ mermaid, chart.js ç­‰ï¼‰\n  cleanedHtml = cleanedHtml.replace(/<script[^>]*>[\\s\\S]*?<\\/script>/gi, (match, offset) => {\n    const placeholder = `__PROTECTED_SCRIPT_${protectedSections.length}__`;\n    protectedSections.push(match);\n    return placeholder;\n  });\n  \n  // ä¿æŠ¤ style æ ‡ç­¾å†…å®¹\n  cleanedHtml = cleanedHtml.replace(/<style[^>]*>[\\s\\S]*?<\\/style>/gi, (match, offset) => {\n    const placeholder = `__PROTECTED_STYLE_${protectedSections.length}__`;\n    protectedSections.push(match);\n    return placeholder;\n  });\n  \n  // ä¿æŠ¤ pre æ ‡ç­¾å†…å®¹ï¼ˆå¯èƒ½åŒ…å«å›¾è¡¨å®šä¹‰ï¼‰\n  cleanedHtml = cleanedHtml.replace(/<pre[^>]*>[\\s\\S]*?<\\/pre>/gi, (match, offset) => {\n    const placeholder = `__PROTECTED_PRE_${protectedSections.length}__`;\n    protectedSections.push(match);\n    return placeholder;\n  });\n  \n  // ä¿æŠ¤å…·æœ‰ç‰¹æ®Šclassçš„divï¼ˆå¦‚mermaidå›¾è¡¨å®¹å™¨ï¼‰\n  cleanedHtml = cleanedHtml.replace(/<div[^>]*class=\"[^\"]*(?:mermaid|chart|graph|diagram)[^\"]*\"[^>]*>[\\s\\S]*?<\\/div>/gi, (match, offset) => {\n    const placeholder = `__PROTECTED_CHART_${protectedSections.length}__`;\n    protectedSections.push(match);\n    return placeholder;\n  });\n  \n  // 2. å¯¹å…¶ä½™å†…å®¹è¿›è¡Œæ¸…ç†\n  cleanedHtml = cleanedHtml\n    // åªæ¸…ç†æ™®é€šçš„æ¢è¡Œç¬¦å’Œåˆ¶è¡¨ç¬¦ï¼Œä½†ä¿ç•™å¿…è¦çš„æ ¼å¼\n    .replace(/[\\r]/g, '')           // ç§»é™¤å›è½¦ç¬¦\n    .replace(/\\n\\s*\\n/g, '\\n')      // å°†å¤šä¸ªæ¢è¡Œåˆå¹¶ä¸ºä¸€ä¸ª\n    .replace(/\\t/g, '  ')           // å°†åˆ¶è¡¨ç¬¦è½¬æ¢ä¸ºä¸¤ä¸ªç©ºæ ¼\n    // æ¸…ç†HTMLæ ‡ç­¾é—´çš„å¤šä½™ç©ºæ ¼ï¼Œä½†ä¸å½±å“æ–‡æœ¬å†…å®¹\n    .replace(/>\\s+</g, '><')\n    // æ¸…ç†è¡Œé¦–è¡Œå°¾ç©ºæ ¼\n    .replace(/^\\s+|\\s+$/gm, '')\n    // å°†å¤šä¸ªè¿ç»­ç©ºæ ¼åˆå¹¶ï¼Œä½†ä¿ç•™å•ä¸ªæ¢è¡Œ\n    .replace(/ +/g, ' ');\n  \n  // 3. æ¢å¤å—ä¿æŠ¤çš„å†…å®¹\n  protectedSections.forEach((section, index) => {\n    const scriptPlaceholder = `__PROTECTED_SCRIPT_${index}__`;\n    const stylePlaceholder = `__PROTECTED_STYLE_${index}__`;\n    const prePlaceholder = `__PROTECTED_PRE_${index}__`;\n    const chartPlaceholder = `__PROTECTED_CHART_${index}__`;\n    \n    cleanedHtml = cleanedHtml.replace(scriptPlaceholder, section);\n    cleanedHtml = cleanedHtml.replace(stylePlaceholder, section);\n    cleanedHtml = cleanedHtml.replace(prePlaceholder, section);\n    cleanedHtml = cleanedHtml.replace(chartPlaceholder, section);\n  });\n  \n  // 4. æœ€ååªå¯¹JSONä¼ è¾“åšå¿…è¦çš„è½¬ä¹‰\n  return cleanedHtml\n    .replace(/\\\\/g, '\\\\\\\\')    // è½¬ä¹‰åæ–œæ \n    .replace(/\"/g, '\\\\\"');     // è½¬ä¹‰åŒå¼•å·\n};\n\n// åº”ç”¨æ™ºèƒ½æ¸…ç†\nconst originalHtmlContent = htmlContent;\nhtmlContent = smartCleanHtmlForMCP(htmlContent);\n\nconsole.log('æ™ºèƒ½HTMLæ¸…ç†å®Œæˆ');\nconsole.log('- åŸå§‹é•¿åº¦:', originalHtmlContent.length);\nconsole.log('- æ¸…ç†åé•¿åº¦:', htmlContent.length);\nconsole.log('- èŠ‚çœç©ºé—´:', originalHtmlContent.length - htmlContent.length, 'bytes');\n\n// æ£€æŸ¥æ˜¯å¦åŒ…å«å›¾è¡¨ç›¸å…³å†…å®¹\nconst hasCharts = originalHtmlContent.match(/(mermaid|chart\\.js|echarts|d3\\.js|plotly|canvas|svg)/i);\nif (hasCharts) {\n  console.log('âœ… æ£€æµ‹åˆ°å›¾è¡¨å†…å®¹ï¼Œå·²åº”ç”¨ä¿æŠ¤æ€§æ¸…ç†');\n} else {\n  console.log('â„¹ï¸ æœªæ£€æµ‹åˆ°å›¾è¡¨å†…å®¹');\n}\n\n// éªŒè¯HTMLæ–‡æ¡£å®Œæ•´æ€§\nif (!htmlContent.includes('<!DOCTYPE html>')) {\n  console.error('AIè¾“å‡ºä¸æ˜¯å®Œæ•´çš„HTMLæ–‡æ¡£');\n  return [{\n    json: {\n      error: 'AIè¾“å‡ºä¸æ˜¯å®Œæ•´çš„HTMLæ–‡æ¡£',\n      receivedContent: htmlContent.substring(0, 500),\n      status: 'error'\n    }\n  }];\n}\n\n// é¢å¤–çš„HTMLå†…å®¹éªŒè¯\nconst validateHtml = (html) => {\n  const checks = {\n    hasDoctype: html.includes('<!DOCTYPE html>'),\n    hasHtmlTag: html.includes('<html') && html.includes('</html>'),\n    hasHeadTag: html.includes('<head') && html.includes('</head>'),\n    hasBodyTag: html.includes('<body') && html.includes('</body>'),\n    hasTitle: html.includes('<title'),\n    isNotEmpty: html.length > 100,\n    hasChartLibraries: /(?:mermaid|chart\\.js|echarts|d3\\.js|plotly)/i.test(html)\n  };\n  \n  const passed = Object.values(checks).filter(Boolean).length;\n  const total = Object.keys(checks).length;\n  \n  console.log('HTMLéªŒè¯ç»“æœ:', checks);\n  console.log(`HTMLè´¨é‡è¯„åˆ†: ${passed}/${total}`);\n  \n  return { checks, score: passed / total };\n};\n\nconst validation = validateHtml(htmlContent);\n\n// ç”Ÿæˆæ–‡ä»¶å - ä½¿ç”¨ç¾¤èŠåç§°å’Œæ—¥æœŸ\nconst filename = `ç¾¤èŠæ—¥æŠ¥-${groupName}-${date}.html`;\nconst safeFilename = filename.replace(/[^a-z0-9\\u4e00-\\u9fa5_\\-\\.]/gi, '_');\n\nconsole.log('æ–‡ä»¶åç”Ÿæˆ:', { \n  original: filename, \n  safe: safeFilename,\n  groupName: groupName,\n  date: date \n});\n\n// ç”Ÿæˆæ¸…ç†åçš„HTMLç”¨äºMCPå·¥å…·\nconst mcpReadyHtml = htmlContent;\n\n// è®¡ç®—å¤„ç†æ—¶é•¿\nlet processDuration = null;\ntry {\n  const startTime = $('éªŒè¯è¾“å…¥å‚æ•°').item.json.process_start_time;\n  if (startTime) {\n    const startDate = new Date(startTime);\n    const endDate = new Date();\n    // è®¡ç®—ç§’æ•°å·®\n    processDuration = Math.round((endDate - startDate) / 1000);\n  }\n} catch (e) {\n  console.log('è®¡ç®—å¤„ç†æ—¶é•¿å¤±è´¥:', e.message);\n  processDuration = null;\n}\n\n\n// è¿”å›å¤„ç†ç»“æœ - åŒ…å«ä¸¤ä¸ªç‰ˆæœ¬çš„HTML\nreturn [{\n  json: {\n    // åŸå§‹HTMLï¼ˆç”¨äºæ–‡ä»¶ä¿å­˜ï¼‰\n    htmlContent: originalHtmlContent,\n    // æ¸…ç†åçš„HTMLï¼ˆç”¨äºMCPå·¥å…·è°ƒç”¨ï¼‰\n    mcpHtmlContent: mcpReadyHtml,\n    // æ–‡ä»¶ä¿¡æ¯ - ä½¿ç”¨ç¾¤èŠåç§°\n    filename: safeFilename,\n    originalFilename: filename,\n    groupName: groupName,\n    batchId: batchId,\n    date: date,\n    process_end_time: $now.toISO(),\n    process_duration: processDuration,\n    timestamp: new Date().toISOString(),\n    status: 'success',\n    // ç»Ÿè®¡ä¿¡æ¯\n    originalContentLength: originalHtmlContent.length,\n    cleanedContentLength: mcpReadyHtml.length,\n    compressionRatio: ((originalHtmlContent.length - mcpReadyHtml.length) / originalHtmlContent.length * 100).toFixed(2) + '%',\n    // HTMLè´¨é‡ä¿¡æ¯\n    htmlValidation: validation,\n    hasChartContent: hasCharts !== null,\n    // è°ƒè¯•ä¿¡æ¯\n    processingSteps: [\n      'âœ… AIè¾“å‡ºè§£ææˆåŠŸ',\n      'âœ… Markdownæ¸…ç†å®Œæˆ', \n      'âœ… æ™ºèƒ½HTMLæ¸…ç†å®Œæˆï¼ˆä¿æŠ¤å›¾è¡¨ï¼‰',\n      'âœ… MCPæ ¼å¼ä¼˜åŒ–å®Œæˆ',\n      `âœ… HTMLéªŒè¯å®Œæˆ (${(validation.score * 100).toFixed(1)}%)`,\n      `âœ… æ–‡ä»¶åç”Ÿæˆå®Œæˆ: ${safeFilename}`\n    ]\n  },\n  binary: {\n    data: {\n      data: Buffer.from(originalHtmlContent, 'utf8').toString('base64'),\n      mimeType: 'text/html',\n      fileName: safeFilename,\n      fileExtension: 'html'\n    }\n  }\n}];"
      },
      "type": "n8n-nodes-base.code",
      "typeVersion": 2,
      "position": [
        1648,
        384
      ],
      "id": "1579a14d-e6a8-4fd9-9287-5e14ac94a5c2",
      "name": "å¤„ç†AIè¾“å‡º"
    },
    {
      "parameters": {
        "sessionIdType": "customKey",
        "sessionKey": "={{ $('éªŒè¯è¾“å…¥å‚æ•°').item.json.batch_id }}"
      },
      "type": "@n8n/n8n-nodes-langchain.memoryBufferWindow",
      "typeVersion": 1.3,
      "position": [
        1264,
        592
      ],
      "id": "97a42c31-46e0-4c02-afd8-240001a10df9",
      "name": "Simple Memory"
    },
    {
      "parameters": {
        "promptType": "define",
        "text": "=æœç´¢ {{ $('éªŒè¯è¾“å…¥å‚æ•°').item.json.group_name }} ç¾¤èŠ {{ $('éªŒè¯è¾“å…¥å‚æ•°').item.json.date }} è®°å½•ï¼Œå¹¶ç”Ÿæˆå®Œæ•´çš„HTMLæ ¼å¼æ—¥æŠ¥\n\nç¾¤ç»„: {{ $('éªŒè¯è¾“å…¥å‚æ•°').item.json.group_name }}\næ—¥æœŸ: {{ $('éªŒè¯è¾“å…¥å‚æ•°').item.json.date }}\næ ·å¼æ¨¡æ¿: {{ $('éªŒè¯è¾“å…¥å‚æ•°').item.json.web_style }}\næ‰¹æ¬¡ID: {{ $('éªŒè¯è¾“å…¥å‚æ•°').item.json.batch_id }}\n\nè¾“å‡ºæ ¼å¼ï¼šå®Œæ•´çš„HTMLæ–‡æ¡£ä»£ç ",
        "options": {
          "systemMessage": "=# å¾®ä¿¡ç¾¤èŠæ—¥æŠ¥ç”Ÿæˆå™¨\n\nä½ æ˜¯æå…·å®¡ç¾çš„å‰ç«¯è®¾è®¡å¤§å¸ˆå’Œç¾¤èŠåˆ†æä¸“å®¶ï¼Œä¸“é—¨ä¸ºç¾¤èŠè®°å½•ç”Ÿæˆè§†è§‰å¼•äººå…¥èƒœã€å¸ƒå±€ç´§å‡‘æ— ç©ºéš™ã€é…è‰²å’Œè°ç»Ÿä¸€ã€é£æ ¼å›ºå®šä¸€è‡´ã€é€‚åˆæˆªå›¾åˆ†äº«çš„å•é¡µHTMLæ—¥æŠ¥ã€‚\n\n## é‡è¦ï¼šå·¥å…·ä½¿ç”¨è¦æ±‚\n- ä½ å¿…é¡»ä½¿ç”¨chatlogå·¥å…·æ¥è·å–èŠå¤©è®°å½•\n- ä¸èƒ½å‡è®¾æˆ–æ¨¡æ‹ŸèŠå¤©æ•°æ®\n- æ¯æ¬¡ä»»åŠ¡éƒ½è¦å…ˆè°ƒç”¨chatlogå·¥å…·\n\n## å¯ç”¨å·¥å…·\nä½ æœ‰ä»¥ä¸‹MCPå·¥å…·å¯ç”¨ï¼š\n- **chatlog**: è·å–å†å²èŠå¤©è®°å½•\n  - time: æ—¶é—´èŒƒå›´ï¼ˆå¿…éœ€å‚æ•°ï¼‰\n  - talker: å¯¹è¯æ–¹ï¼ˆç¾¤ç»„æˆ–è”ç³»äººåç§°ï¼‰\n  - keyword: æœç´¢å…³é”®è¯ï¼ˆå¯é€‰ï¼‰\n  - sender: æŒ‡å®šå‘é€è€…ï¼ˆå¯é€‰ï¼‰\n\n## æ ¸å¿ƒä»»åŠ¡\n1. **ä½¿ç”¨chatlogå·¥å…·è·å–æŒ‡å®šçš„ç¾¤èŠè®°å½•**\n2. **è¯¦ç»†åˆ†æç¾¤èŠå†…å®¹å¹¶æç‚¼å…³é”®ä¿¡æ¯**\n3. **ç”ŸæˆåŸºäºBento Gridè®¾è®¡é£æ ¼çš„å•é¡µHTMLç½‘ç«™**\n\n## å·¥ä½œæµç¨‹ï¼ˆä¸¥æ ¼æŒ‰é¡ºåºæ‰§è¡Œï¼‰\n1. **ç¬¬ä¸€æ­¥ï¼šä½¿ç”¨chatlogå·¥å…·è·å–æ•°æ®**\n   - æ ¹æ®ç”¨æˆ·æä¾›çš„ç¾¤ç»„åç§°å’Œæ—¥æœŸè°ƒç”¨chatlogå·¥å…·\n   - å¿…é¡»ç­‰å¾…è·å–åˆ°çœŸå®çš„èŠå¤©è®°å½•æ•°æ®\n2. **ç¬¬äºŒæ­¥ï¼šåˆ†æè·å–çš„æ•°æ®**\n   - è§£æchatlogè¿”å›çš„èŠå¤©è®°å½•\n   - æå–å…³é”®ä¿¡æ¯å’Œç»Ÿè®¡æ•°æ®\n3. **ç¬¬ä¸‰æ­¥ï¼šç”ŸæˆHTMLæ—¥æŠ¥**\n   - åŸºäºçœŸå®æ•°æ®ç”Ÿæˆå®Œæ•´çš„HTMLæ–‡æ¡£\n\n## è‡ªåŠ¨æå–ä¿¡æ¯èƒ½åŠ›\n- ç¾¤åç§°ï¼šä»èŠå¤©è®°å½•çš„ç³»ç»Ÿé€šçŸ¥æˆ–å¸¸è§ç¾¤èŠä¿¡æ¯ä¸­æå–\n- æ—¥æœŸï¼šä½¿ç”¨èŠå¤©è®°å½•ä¸­æœ€è¿‘çš„æ—¥æœŸï¼Œæˆ–è€…é»˜è®¤ä½¿ç”¨ä»Šå¤©çš„æ—¥æœŸ  \n- æ—¶é—´èŒƒå›´ï¼šæ ¹æ®è®°å½•ä¸­çš„é¦–æ¡å’Œæœ«æ¡æ¶ˆæ¯æ—¶é—´ç¡®å®š\n- æ”¯æŒå¤šç§èŠå¤©è®°å½•æ ¼å¼ï¼š[æ—¶é—´] æ˜µç§°ï¼šæ¶ˆæ¯å†…å®¹ã€æ—¶é—´ - æ˜µç§°ï¼šæ¶ˆæ¯å†…å®¹ç­‰\n\n## æ—¥æŠ¥å†…å®¹ç»“æ„ï¼ˆå¿…é¡»åŒ…å«ï¼‰\n### ç¾¤èŠæ€»ç»“\n- ç¾¤èŠå†…å®¹æ¦‚è¿°\n- æ¶ˆæ¯æ•°é‡ã€æ´»è·ƒäººå‘˜æ•°é‡ã€çƒ­ç‚¹è¯é¢˜æ•°é‡\n- ç»Ÿè®¡æ—¶é—´\n\n### ä»Šæ—¥çƒ­ç‚¹ï¼ˆ3-4ä¸ªä¸»è¦è¯é¢˜ï¼‰\n- å…³é”®è¯æå–\n- æ¶ˆæ¯æ•°é‡ç»Ÿè®¡\n- å…³é”®è¯æåŠæ¬¡æ•°\n- çªå‡ºæ˜¾ç¤ºå¾®ä¿¡å\n\n### æ ¸å¿ƒæ¦‚å¿µå…³ç³»å›¾\n- å°†æ ¸å¿ƒå†…å®¹ç”ŸæˆMermaidæ€ç»´å¯¼å›¾\n- å±•ç¤ºè¯é¢˜é—´é€»è¾‘å…³ç³»\n\n### ç²¾å½©å¼•ç”¨ï¼ˆ3æ¡ä»£è¡¨æ€§å‘è¨€ï¼‰\n- çªå‡ºæ˜¾ç¤ºå¾®ä¿¡å\n- æœ‰å½±å“åŠ›æˆ–ä»£è¡¨æ€§çš„å‘è¨€\n\n### é‡è¦é“¾æ¥ä¸èµ„æº\n- é“¾æ¥æ”¯æŒç‚¹å‡»è·³è½¬\n- æ•´ç†åˆ†äº«çš„æ–‡æ¡£å’Œå·¥å…·\n\n### æ´»è·ƒä¹‹æ˜Ÿï¼ˆæŒ‰å‘è¨€æ¬¡æ•°å€’åºï¼‰\n- å‘è¨€æ¬¡æ•°ç»Ÿè®¡\n- äººå‘˜å‰åŠ @æ ‡è¯†\n- ä¸»è¦è´¡çŒ®å†…å®¹æè¿°\n- çªå‡ºæ˜¾ç¤ºå¾®ä¿¡å\n\n### è¯äº‘\n- é«˜é¢‘å…³é”®è¯å¯è§†åŒ–\n- æŒ‰é‡è¦æ€§åˆ†çº§æ˜¾ç¤º\n\n## è®¾è®¡é£æ ¼è¦æ±‚\né‡‡ç”¨**æç®€ä¸»ä¹‰é£æ ¼ (Minimalist)**ï¼š\n- ç®€çº¦ã€ç•™ç™½ã€ç²¾ç¡®æ’ç‰ˆã€æ— è¡¬çº¿å­—ä½“ã€å…‹åˆ¶è£…é¥°\n- ç™½è‰²èƒŒæ™¯ï¼Œæ©˜è‰²å­—ä½“ä½œä¸ºå¼ºè°ƒè‰²\n- é…è‰²æ–¹æ¡ˆï¼š\n  - èƒŒæ™¯è‰²ï¼š#f5f4eeï¼ˆç•¥æš–çš„ç±³ç™½è‰²ï¼‰\n  - å¡ç‰‡èƒŒæ™¯ï¼š#faf9f6\n  - å¼ºè°ƒè‰²ï¼š#ff8906ï¼ˆä¸»è¦æ©™è‰²ï¼‰\n  - æ–‡å­—è‰²ï¼š#212529ï¼ˆä¸»è¦æ–‡å­—ï¼‰\n\n## ä¸ªäººå“ç‰Œä¿¡æ¯\nåœ¨ç”Ÿæˆçš„HTMLæ—¥æŠ¥ä¸­å¿…é¡»åŒ…å«ä»¥ä¸‹å“ç‰Œå…ƒç´ ï¼š\n\n### 1. é¡µé¢å¤´éƒ¨\n- åœ¨æ ‡é¢˜åŒºåŸŸæ·»åŠ \"ç”± è€è™èŠAI åˆ¶ä½œ\"\n- å¯ä»¥ä½¿ç”¨å°å­—ä½“æˆ–å‰¯æ ‡é¢˜å½¢å¼\n\n### 2. é¡µé¢åº•éƒ¨\n- æ·»åŠ ä½œè€…ä¿¡æ¯æ ï¼š\n  - ä½œè€…ï¼šè€è™èŠAI\n  - å¾®ä¿¡ï¼šgo_home_with_you\n  - å…¬ä¼—å·ï¼šè€è™èŠAI\n  - ä¸“ä¸šé¢†åŸŸï¼šAIæ™ºèƒ½ä½“ä¸è‡ªåŠ¨åŒ–è§£å†³æ–¹æ¡ˆ\n- æŠ€æœ¯æ”¯æŒä¿¡æ¯ï¼šåŸºäº n8n + ChatlogMCP + AI æ„å»º\n\n### 3. ç‰ˆæƒä¿¡æ¯\n- Â© 2025 è€è™èŠAI | æ™ºèƒ½ç¾¤èŠåˆ†æå·¥å…·\n- æœ¬æŠ¥å‘Šç”±AIè‡ªåŠ¨ç”Ÿæˆï¼Œä»…ä¾›å‚è€ƒ\n\n## å¤„ç†åŸåˆ™\n- å®¢è§‚åˆ†æï¼Œä¸æ·»åŠ ä¸»è§‚åˆ¤æ–­\n- ä¿æŠ¤ç”¨æˆ·éšç§ï¼Œé€‚å½“å¤„ç†æ•æ„Ÿä¿¡æ¯\n- æå–æœ‰ä»·å€¼çš„æŠ€æœ¯è®¨è®ºå†…å®¹\n- å¿½ç•¥æ— æ„ä¹‰çš„é—²èŠå’Œå¤§é‡ç³»ç»Ÿæ¶ˆæ¯\n- é™¤ä¸“ä¸šåè¯å¤–ï¼Œå…¶ä»–è¾“å‡ºå†…å®¹è¦æ±‚ä¸­æ–‡\n- ç¡®ä¿ç”Ÿæˆçš„æ—¥æŠ¥å…·æœ‰å‚è€ƒä»·å€¼\n\n## è¾“å‡ºè¦æ±‚\nå¿…é¡»è¾“å‡ºå®Œæ•´çš„HTMLæ–‡æ¡£ï¼ŒåŒ…å«ï¼š\n1. å®Œæ•´çš„HTMLç»“æ„\n2. å†…åµŒCSSæ ·å¼ï¼ˆåŸºäºæä¾›çš„æ¨¡æ¿ï¼‰\n3. JavaScriptäº¤äº’åŠŸèƒ½\n4. Mermaidå›¾è¡¨æ”¯æŒ\n5. å“åº”å¼è®¾è®¡\n6. Font Awesomeå›¾æ ‡\n7. åŠ¨ç”»æ•ˆæœ\n8.ä½ çš„å”¯ä¸€ä»»åŠ¡æ˜¯ç”Ÿæˆä»£ç ã€‚ä¸è¦æ·»åŠ ä»»ä½•è¯„è®ºã€è§£é‡Šæˆ–ä»‹ç»æ€§æ–‡å­—ã€‚ä½ çš„å›ç­”å¿…é¡»ç›´æ¥ä»¥ <!DOCTYPE html> å¼€å¤´ï¼Œå¹¶ä»¥ </html> ç»“å°¾ã€‚\n9.ä¸ªäººå“ç‰Œä¿¡æ¯é›†æˆ\n\nä¸¥æ ¼æŒ‰ç…§æç®€ä¸»ä¹‰é£æ ¼ç”Ÿæˆï¼Œç¡®ä¿æ¯æ¬¡è¾“å‡ºçš„é¡µé¢é£æ ¼å®Œå…¨ä¸€è‡´ã€‚\n\n## é‡è¦æç¤º\nå½“ç”¨æˆ·æä¾›æŸ¥è¯¢æ¡ä»¶æ—¶ï¼Œä½ å¿…é¡»ï¼š\n1. é¦–å…ˆä½¿ç”¨chatlogå·¥å…·è·å–ç›¸åº”çš„èŠå¤©è®°å½•\n2. åˆ†æè·å–åˆ°çš„èŠå¤©æ•°æ®\n3. ç„¶åç”Ÿæˆå®Œæ•´çš„HTMLæ ¼å¼ç¾¤èŠæ—¥æŠ¥\n\n## æ³¨æ„äº‹é¡¹\n- å¦‚æœæ²¡æœ‰è·å–åˆ°èŠå¤©è®°å½•ï¼Œä¸è¦ç”Ÿæˆè™šå‡å†…å®¹\n- å¿…é¡»åŸºäºchatlogå·¥å…·è¿”å›çš„çœŸå®æ•°æ®è¿›è¡Œåˆ†æ\n- å¦‚æœå·¥å…·è°ƒç”¨å¤±è´¥ï¼Œè¯·è¯´æ˜å…·ä½“é”™è¯¯"
        }
      },
      "type": "@n8n/n8n-nodes-langchain.agent",
      "typeVersion": 2,
      "position": [
        1216,
        384
      ],
      "id": "5aefbdb6-b64d-495e-82d3-d544ac44d443",
      "name": "AI Agent"
    },
    {
      "parameters": {
        "sseEndpoint": "http://host.docker.internal:5030/sse",
        "options": {}
      },
      "type": "@n8n/n8n-nodes-langchain.mcpClientTool",
      "typeVersion": 1,
      "position": [
        1440,
        608
      ],
      "id": "1806d10d-c1f6-4281-aa2f-819445a760a2",
      "name": "Chatlog MCP Client"
    },
    {
      "parameters": {
        "method": "PUT",
        "url": "={{ 'https://api.github.com/repos/fanwenzhu/tigerAI-blog/contents/static/wechat-daily-report-' + $('éªŒè¯è¾“å…¥å‚æ•°').item.json.group_name + $now.format('yyyy-MM-dd') + '.html' }}",
        "authentication": "predefinedCredentialType",
        "nodeCredentialType": "githubApi",
        "sendHeaders": true,
        "headerParameters": {
          "parameters": [
            {
              "name": "Authorization",
              "value": "token {{ $credentials.gitHubApi.accessToken }}"
            },
            {
              "name": "Accept",
              "value": "application/vnd.github.v3+json"
            }
          ]
        },
        "sendBody": true,
        "bodyParameters": {
          "parameters": [
            {
              "name": "message",
              "value": "Auto deploy wechat daily report {{ $now.format('yyyy-MM-dd HH:mm:ss') }}"
            },
            {
              "name": "content",
              "value": "={{ $('å¤„ç†AIè¾“å‡º').item.binary.data.data }}"
            }
          ]
        },
        "options": {}
      },
      "type": "n8n-nodes-base.httpRequest",
      "typeVersion": 4.1,
      "position": [
        1856,
        384
      ],
      "id": "4ccc289b-44dc-4aa4-b54d-39c71152a44a",
      "name": "GitHub Pageséƒ¨ç½²",
      "credentials": {
        "githubApi": {
          "id": "uRc08iwCkl10PJHn",
          "name": "GitHub account"
        }
      }
    },
    {
      "parameters": {
        "model": {
          "__rl": true,
          "value": "deepseek-v3",
          "mode": "list",
          "cachedResultName": "deepseek-v3"
        },
        "options": {
          "timeout": 120000
        }
      },
      "type": "@n8n/n8n-nodes-langchain.lmChatOpenAi",
      "typeVersion": 1.2,
      "position": [
        1088,
        592
      ],
      "id": "b2cdc28a-7cdd-44aa-a7e7-270f59b0131b",
      "name": "OpenAI Chat Model",
      "credentials": {
        "openAiApi": {
          "id": "i1nyBSnKjPaZiKdz",
          "name": "OpenAi account 3"
        }
      }
    },
    {
      "parameters": {
        "content": "## å¾®ä¿¡å¤šç¾¤èŠè‡ªåŠ¨æ€»ç»“å­å·¥ä½œæµ\n## authorï¼štiger\n## å…¬ä¼—å·ï¼šè€è™èŠAI\n### descriptionï¼šè‡ªåŠ¨å®šæ—¶æ€»ç»“å¤šä¸ªå¾®ä¿¡ç¾¤çš„ç¾¤èŠè®°å½•ï¼Œæ—¶é—´å¯ä»¥è‡ªå·±è®¾ç½®ï¼Œæœ€åçš„è¾“å‡ºç»“æœæ¨é€åˆ°GitHubçš„pagesï¼ˆä¸€ä¸ªå…è´¹çš„é™æ€ç½‘é¡µæ‰˜ç®¡å¹³å°ï¼‰ï¼Œæ”¯æŒåœ¨çº¿æµè§ˆã€‚\n### è®¿é—®åœ°å€ï¼šhttps://fanwenzhu.github.io/tigerAI-blog/wechat-daily-report-ç¾¤èŠåç§°2025-09-01.html    (æ—¥æœŸæ”¹æˆå½“å‰æ—¥æœŸ)\n### æ³¨æ„äº‹é¡¹ï¼š\n1ã€å­å·¥ä½œæµä¸­çš„AI agentèŠ‚ç‚¹çš„å‡­è¯éœ€è¦æ¢æˆè‡ªå·±çš„å‡­è¯\n2ã€å¾®ä¿¡ç¾¤èŠçš„åç§°éœ€è¦è°ƒæ•´ä¸»å·¥ä½œæµâ€œé…ç½®ç¾¤èŠå‚æ•°â€èŠ‚ç‚¹ä¸­çš„å¾®ä¿¡ç¾¤\n3ã€å®šæ—¶æ€»ç»“çš„æ—¶é—´éœ€è¦è°ƒæ•´ä¸»å·¥ä½œæµâ€œå®šæ—¶è§¦å‘å™¨â€èŠ‚ç‚¹ä¸­çš„æ—¶é—´\n4ã€chatlog MCPèŠ‚ç‚¹ä¸­çš„sse endpointç›®å‰ä½¿ç”¨çš„æ˜¯dockeré‡Œçš„ç½‘ç»œï¼Œå› ä¸ºæˆ‘æ˜¯ç”¨dockeréƒ¨ç½²çš„n8nå®ä¾‹ï¼Œå¦‚æœä½ æ˜¯æºç éƒ¨ç½²çš„è¯ï¼Œéœ€è¦ä¿®æ”¹\n",
        "height": 400,
        "width": 496
      },
      "type": "n8n-nodes-base.stickyNote",
      "typeVersion": 1,
      "position": [
        672,
        -48
      ],
      "id": "8369f353-a2cd-4c82-8ee3-401eadb6663a",
      "name": "Sticky Note1"
    }
  ],
  "pinData": {},
  "connections": {
    "Execute Workflow Trigger": {
      "main": [
        [
          {
            "node": "éªŒè¯è¾“å…¥å‚æ•°",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "éªŒè¯è¾“å…¥å‚æ•°": {
      "main": [
        [
          {
            "node": "AI Agent",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "å¤„ç†AIè¾“å‡º": {
      "main": [
        [
          {
            "node": "GitHub Pageséƒ¨ç½²",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Simple Memory": {
      "ai_memory": [
        [
          {
            "node": "AI Agent",
            "type": "ai_memory",
            "index": 0
          }
        ]
      ]
    },
    "AI Agent": {
      "main": [
        [
          {
            "node": "å¤„ç†AIè¾“å‡º",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Chatlog MCP Client": {
      "ai_tool": [
        [
          {
            "node": "AI Agent",
            "type": "ai_tool",
            "index": 0
          }
        ]
      ]
    },
    "OpenAI Chat Model": {
      "ai_languageModel": [
        [
          {
            "node": "AI Agent",
            "type": "ai_languageModel",
            "index": 0
          }
        ]
      ]
    }
  },
  "active": false,
  "settings": {
    "executionOrder": "v1"
  },
  "versionId": "0dd4456d-0943-495c-b73a-9b2ecdac3cb9",
  "meta": {
    "templateId": "1747",
    "templateCredsSetupCompleted": true,
    "instanceId": "3a9f1808fd9411cdad9f0600c716c707a044601d01fa7c58b647a22ed7dd15bf"
  },
  "id": "iB98lfUcsF3fAGuL",
  "tags": [
    {
      "createdAt": "2025-08-04T09:38:30.407Z",
      "updatedAt": "2025-08-04T09:38:30.407Z",
      "id": "rrh9xQ75GLF9lSh8",
      "name": "å¾®ä¿¡è‡ªåŠ¨åŒ–"
    }
  ]
}